<mxfile host="app.diagrams.net">
  <diagram id="makeup-request-flow" name="Student Makeup Request Flow">
    <mxGraphModel dx="1434" dy="844" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="2200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Swimlane: Student -->
        <mxCell id="swimlane-student" value="Student (Há»c ViÃªn)" style="swimlane;startSize=40;horizontal=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="40" y="40" width="320" height="2800" as="geometry" />
        </mxCell>
        
        <!-- Student: Start -->
        <mxCell id="student-start" value="Login há»‡ thá»‘ng" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;" parent="swimlane-student" vertex="1">
          <mxGeometry x="85" y="60" width="150" height="50" as="geometry" />
        </mxCell>
        
        <!-- Student: Navigate to My Requests -->
        <mxCell id="student-nav-requests" value="VÃ o tab&#xa;&quot;My Requests&quot;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="swimlane-student" vertex="1">
          <mxGeometry x="85" y="140" width="150" height="60" as="geometry" />
        </mxCell>
        
        <!-- Student: Click Create Request -->
        <mxCell id="student-click-create" value="Click button&#xa;&quot;+ Táº¡o Request&quot;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="swimlane-student" vertex="1">
          <mxGeometry x="85" y="280" width="150" height="60" as="geometry" />
        </mxCell>
        
        <!-- Student: Select Request Type -->
        <mxCell id="student-select-type" value="Chá»n loáº¡i request:&#xa;&quot;Makeup - Há»c bÃ¹&quot;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="swimlane-student" vertex="1">
          <mxGeometry x="85" y="460" width="150" height="60" as="geometry" />
        </mxCell>
        
        <!-- Student: Choose Case -->
        <mxCell id="student-choose-case" value="Chá»n trÆ°á»ng há»£p:&#xa;â–¡ Buá»•i Ä‘Ã£ nghá»‰&#xa;â–¡ Buá»•i sáº¯p tá»›i" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontStyle=1;" parent="swimlane-student" vertex="1">
          <mxGeometry x="75" y="640" width="170" height="100" as="geometry" />
        </mxCell>
        
        <!-- Student: Case 1 - Select Missed Session -->
        <mxCell id="student-case1-select" value="[Case 1]&#xa;Chá»n buá»•i Ä‘Ã£ nghá»‰&#xa;(trong X tuáº§n)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="swimlane-student" vertex="1">
          <mxGeometry x="20" y="800" width="130" height="70" as="geometry" />
        </mxCell>
        
        <!-- Student: Case 2 - Select Future Session -->
        <mxCell id="student-case2-select" value="[Case 2]&#xa;Chá»n buá»•i sáº¯p tá»›i&#xa;(pre-register)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="swimlane-student" vertex="1">
          <mxGeometry x="170" y="800" width="130" height="70" as="geometry" />
        </mxCell>
        
        <!-- Student: View Available Makeup Sessions -->
        <mxCell id="student-view-available" value="Xem danh sÃ¡ch&#xa;buá»•i há»c bÃ¹ kháº£ dá»¥ng:&#xa;- CÃ¹ng ná»™i dung&#xa;- Nhiá»u chi nhÃ¡nh&#xa;- Online/Offline/Hybrid" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="swimlane-student" vertex="1">
          <mxGeometry x="85" y="940" width="150" height="110" as="geometry" />
        </mxCell>
        
        <!-- Student: Filter Options -->
        <mxCell id="student-filter" value="Lá»c theo:&#xa;- Chi nhÃ¡nh&#xa;- Modality&#xa;- NgÃ y/giá»" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="swimlane-student" vertex="1">
          <mxGeometry x="85" y="1080" width="150" height="80" as="geometry" />
        </mxCell>
        
        <!-- Student: Select Makeup Session -->
        <mxCell id="student-select-makeup" value="Chá»n buá»•i há»c bÃ¹&#xa;phÃ¹ há»£p" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="swimlane-student" vertex="1">
          <mxGeometry x="85" y="1190" width="150" height="60" as="geometry" />
        </mxCell>
        
        <!-- Student: Fill Form -->
        <mxCell id="student-fill-form" value="Äiá»n form:&#xa;- LÃ½ do há»c bÃ¹&#xa;- Ghi chÃº (optional)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="swimlane-student" vertex="1">
          <mxGeometry x="85" y="1280" width="150" height="80" as="geometry" />
        </mxCell>
        
        <!-- Student: Click Submit -->
        <mxCell id="student-click-submit" value="Click&#xa;&quot;Gá»­i yÃªu cáº§u&quot;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=1;" parent="swimlane-student" vertex="1">
          <mxGeometry x="85" y="1390" width="150" height="60" as="geometry" />
        </mxCell>
        
        <!-- Student: View Success -->
        <mxCell id="student-view-success" value="Xem thÃ´ng bÃ¡o:&#xa;âœ… YÃªu cáº§u Ä‘Ã£ gá»­i&#xa;â³ Chá» phÃª duyá»‡t" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="swimlane-student" vertex="1">
          <mxGeometry x="85" y="1730" width="150" height="80" as="geometry" />
        </mxCell>
        
        <!-- Student: View Badge -->
        <mxCell id="student-view-badge" value="Buá»•i há»c bÃ¹ hiá»ƒn thá»‹&#xa;badge â³ Chá» duyá»‡t" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="swimlane-student" vertex="1">
          <mxGeometry x="85" y="1840" width="150" height="60" as="geometry" />
        </mxCell>
        
        <!-- Student: Receive Email Approved -->
        <mxCell id="student-receive-approved" value="ðŸ“§ Nháº­n email:&#xa;&quot;YÃªu cáº§u Ä‘Ã£ Ä‘Æ°á»£c duyá»‡t&quot;&#xa;+ ThÃ´ng tin buá»•i há»c bÃ¹" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="swimlane-student" vertex="1">
          <mxGeometry x="85" y="2350" width="150" height="90" as="geometry" />
        </mxCell>
        
        <!-- Student: View Schedule Updated -->
        <mxCell id="student-view-schedule" value="Xem lá»‹ch há»c:&#xa;- Buá»•i gá»‘c: Excused&#xa;- Buá»•i há»c bÃ¹ má»›i&#xa;(is_makeup=TRUE)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;" parent="swimlane-student" vertex="1">
          <mxGeometry x="85" y="2470" width="150" height="100" as="geometry" />
        </mxCell>
        
        <!-- Student: Attend Makeup -->
        <mxCell id="student-attend-makeup" value="Tham gia&#xa;buá»•i há»c bÃ¹&#xa;Ä‘Ãºng giá»" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;" parent="swimlane-student" vertex="1">
          <mxGeometry x="85" y="2610" width="150" height="80" as="geometry" />
        </mxCell>
        
        <!-- Student: Receive Email Rejected (Alternative Path) -->
        <mxCell id="student-receive-rejected" value="ðŸ“§ Nháº­n email:&#xa;&quot;YÃªu cáº§u bá»‹ tá»« chá»‘i&quot;&#xa;LÃ½ do: [...]" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="swimlane-student" vertex="1">
          <mxGeometry x="20" y="2350" width="150" height="80" as="geometry" />
        </mxCell>
        
        <!-- Swimlane: System -->
        <mxCell id="swimlane-system" value="System" style="swimlane;startSize=40;horizontal=1;fillColor=#f5f5f5;strokeColor=#666666;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="360" y="40" width="480" height="2800" as="geometry" />
        </mxCell>
        
        <!-- System: Load My Requests -->
        <mxCell id="system-load-requests" value="Query student_request:&#xa;- WHERE student_id&#xa;- ORDER BY created_at DESC&#xa;- Show status badges" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=left;" parent="swimlane-system" vertex="1">
          <mxGeometry x="165" y="220" width="150" height="100" as="geometry" />
        </mxCell>
        
        <!-- System: Show Request Form -->
        <mxCell id="system-show-form-modal" value="Hiá»ƒn thá»‹ modal:&#xa;- Chá»n loáº¡i request&#xa;- Radio buttons" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=left;" parent="swimlane-system" vertex="1">
          <mxGeometry x="165" y="350" width="150" height="80" as="geometry" />
        </mxCell>
        
        <!-- System: Show Case Selection -->
        <mxCell id="system-show-cases" value="Hiá»ƒn thá»‹ 2 options:&#xa;â–¡ Buá»•i Ä‘Ã£ nghá»‰&#xa;  (missed, trong X tuáº§n)&#xa;â–¡ Buá»•i sáº¯p tá»›i&#xa;  (pre-register)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=left;" parent="swimlane-system" vertex="1">
          <mxGeometry x="165" y="540" width="150" height="120" as="geometry" />
        </mxCell>
        
        <!-- System: Case 1 - Load Missed Sessions -->
        <mxCell id="system-case1-load" value="[Case 1] Query:&#xa;SELECT ss.*&#xa;FROM student_session ss&#xa;JOIN session s&#xa;WHERE ss.attendance IN&#xa;  (&#39;absent&#39;, &#39;late&#39;)&#xa;AND s.session_date&#xa;  &gt;= TODAY - X weeks&#xa;AND s.status = &#39;done&#39;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontStyle=1;" parent="swimlane-system" vertex="1">
          <mxGeometry x="30" y="750" width="180" height="150" as="geometry" />
        </mxCell>
        
        <!-- System: Case 2 - Load Future Sessions -->
        <mxCell id="system-case2-load" value="[Case 2] Query:&#xa;SELECT s.*&#xa;FROM session s&#xa;JOIN enrollment e&#xa;WHERE e.student_id&#xa;AND s.session_date&#xa;  &gt;= TODAY&#xa;AND s.status = &#39;planned&#39;&#xa;ORDER BY session_date" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontStyle=1;" parent="swimlane-system" vertex="1">
          <mxGeometry x="240" y="750" width="180" height="150" as="geometry" />
        </mxCell>
        
        <!-- System: Find Makeup Sessions (Cross-branch & Modality) -->
        <mxCell id="system-find-makeup" value="Query buá»•i há»c bÃ¹:&#xa;SELECT s.*, c.class_name,&#xa;  b.branch_name, c.modality&#xa;FROM session s&#xa;JOIN class c ON s.class_id&#xa;JOIN branch b ON c.branch_id&#xa;WHERE s.course_session_id&#xa;  = [selected].course_session_id&#xa;AND s.status = &#39;planned&#39;&#xa;AND s.session_date &gt;= TODAY&#xa;AND (enrolled &lt; capacity)&#xa;ORDER BY b.branch_id,&#xa;  c.modality, s.session_date" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;align=left;fontStyle=1;" parent="swimlane-system" vertex="1">
          <mxGeometry x="30" y="930" width="200" height="250" as="geometry" />
        </mxCell>
        
        <!-- System: Show Available List with Filters -->
        <mxCell id="system-show-available" value="Hiá»ƒn thá»‹ list:&#xa;Group by:&#xa;  - Chi nhÃ¡nh&#xa;  - Modality badge&#xa;    ðŸ¢ Offline&#xa;    ðŸ’» Online&#xa;    ðŸ”„ Hybrid&#xa;&#xa;Show for each:&#xa;- NgÃ y giá»&#xa;- TÃªn lá»›p&#xa;- Teacher&#xa;- Chá»— trá»‘ng&#xa;&#xa;Filter sidebar:&#xa;- Branch checkboxes&#xa;- Modality checkboxes&#xa;- Date range" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=left;" parent="swimlane-system" vertex="1">
          <mxGeometry x="260" y="930" width="150" height="280" as="geometry" />
        </mxCell>
        
        <!-- System: Show Confirmation Form -->
        <mxCell id="system-show-form" value="Hiá»ƒn thá»‹ modal xÃ¡c nháº­n:&#xa;- Pre-fill buá»•i gá»‘c&#xa;  (date, class, content)&#xa;- Pre-fill buá»•i há»c bÃ¹&#xa;  (date, class, branch,&#xa;   modality, teacher)&#xa;- Input: LÃ½ do" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=left;" parent="swimlane-system" vertex="1">
          <mxGeometry x="165" y="1240" width="150" height="140" as="geometry" />
        </mxCell>
        
        <!-- System: Frontend Validation -->
        <mxCell id="system-frontend-validate" value="Frontend validation:&#xa;- Check schedule conflict&#xa;- Warning náº¿u&#xa;  cross-branch&#xa;- Warning náº¿u&#xa;  modality khÃ¡c" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;" parent="swimlane-system" vertex="1">
          <mxGeometry x="165" y="1480" width="150" height="110" as="geometry" />
        </mxCell>
        
        <!-- System: Backend Validation -->
        <mxCell id="system-backend-validate" value="Backend validation:&#xa;1. Makeup session exists?&#xa;2. Same course_session_id? â­&#xa;3. Capacity available?&#xa;4. Duplicate request?&#xa;5. Case 1: Within X weeks?&#xa;6. Case 2: Future session?" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;fontStyle=1;" parent="swimlane-system" vertex="1">
          <mxGeometry x="30" y="1600" width="150" height="140" as="geometry" />
        </mxCell>
        
        <!-- System: Insert Request -->
        <mxCell id="system-insert-request" value="INSERT student_request:&#xa;- student_id&#xa;- target_session_id&#xa;- makeup_session_id â­&#xa;- request_type=&#39;makeup&#39;&#xa;- status=&#39;pending&#39; â­&#xa;- reason (lÃ½ do)&#xa;- submitted_at=NOW()&#xa;&#xa;Note: LÆ°u cáº£&#xa;target_branch_id vÃ &#xa;makeup_branch_id náº¿u khÃ¡c" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;align=left;fontStyle=1;" parent="swimlane-system" vertex="1">
          <mxGeometry x="210" y="1600" width="180" height="180" as="geometry" />
        </mxCell>
        
        <!-- System: Send Email to Staff -->
        <mxCell id="system-send-email-staff" value="ðŸ“§ Gá»­i email&#xa;tá»›i Academic Staff&#xa;(cá»§a makeup branch):&#xa;&quot;YÃªu cáº§u há»c bÃ¹ má»›i&#xa;tá»« [Student]&#xa;Buá»•i bÃ¹: [Date]&#xa;Branch: [Branch]&#xa;Modality: [Type]&quot;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="swimlane-system" vertex="1">
          <mxGeometry x="300" y="1800" width="150" height="150" as="geometry" />
        </mxCell>
        
        <!-- System: Show Success Message -->
        <mxCell id="system-show-success" value="Hiá»ƒn thá»‹ success:&#xa;âœ… Gá»­i thÃ nh cÃ´ng&#xa;ThÃ´ng tin buá»•i há»c bÃ¹&#xa;(branch, modality)&#xa;Redirect to &quot;My Requests&quot;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="swimlane-system" vertex="1">
          <mxGeometry x="30" y="1800" width="150" height="110" as="geometry" />
        </mxCell>
        
        <!-- System: Load Staff Requests -->
        <mxCell id="system-load-staff-requests" value="Query student_request:&#xa;- WHERE status=&#39;pending&#39;&#xa;- AND type=&#39;makeup&#39;&#xa;- JOIN target_session&#xa;- JOIN makeup_session&#xa;- JOIN class (both)&#xa;- JOIN branch (both)&#xa;- Check capacity&#xa;- Check course_session_id â­&#xa;- Show cross-branch flag" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=left;" parent="swimlane-system" vertex="1">
          <mxGeometry x="300" y="1980" width="150" height="180" as="geometry" />
        </mxCell>
        
        <!-- System: Show Request Detail -->
        <mxCell id="system-show-detail" value="Hiá»ƒn thá»‹ detail:&#xa;- Student info&#xa;- Target session&#xa;  (original class/branch)&#xa;- Makeup session&#xa;  (new class/branch)&#xa;- Branch indicator âš ï¸&#xa;- Modality badge&#xa;- Capacity check âœ…&#xa;- Same content âœ…&#xa;- Absence stats&#xa;- Policy check (X weeks)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=left;" parent="swimlane-system" vertex="1">
          <mxGeometry x="165" y="2180" width="150" height="200" as="geometry" />
        </mxCell>
        
        <!-- System: Transaction Approve -->
        <mxCell id="system-transaction-approve" value="BEGIN TRANSACTION:&#xa;1. UPDATE student_request&#xa;   SET status=&#39;approved&#39; â­&#xa;2. UPDATE target session&#xa;   SET attendance=&#39;excused&#39;&#xa;   (trong student_session)&#xa;3. CREATE student_session&#xa;   FOR makeup_session_id:&#xa;   - session_id = makeup_id&#xa;   - is_makeup = TRUE â­&#xa;   - original_session_id&#xa;   - attendance = &#39;planned&#39;&#xa;4. UPDATE session capacity&#xa;   (enrolled count)&#xa;COMMIT" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;align=left;fontStyle=1;" parent="swimlane-system" vertex="1">
          <mxGeometry x="30" y="2400" width="200" height="240" as="geometry" />
        </mxCell>
        
        <!-- System: Send Email Approved -->
        <mxCell id="system-send-email-approved" value="ðŸ“§ Gá»­i email&#xa;tá»›i Student:&#xa;&quot;YÃªu cáº§u Ä‘Æ°á»£c duyá»‡t&quot;&#xa;+ ThÃ´ng tin buá»•i há»c bÃ¹&#xa;+ Chi nhÃ¡nh&#xa;+ Modality&#xa;+ Teacher&#xa;+ Link to class" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="swimlane-system" vertex="1">
          <mxGeometry x="250" y="2420" width="150" height="140" as="geometry" />
        </mxCell>
        
        <!-- System: Send Email to Teacher -->
        <mxCell id="system-send-email-teacher" value="ðŸ“§ Gá»­i email&#xa;tá»›i Teacher (makeup):&#xa;&quot;Há»c viÃªn [Name]&#xa;sáº½ tham gia há»c bÃ¹&#xa;tá»« class [X]&#xa;branch [Y]&quot;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="swimlane-system" vertex="1">
          <mxGeometry x="250" y="2580" width="150" height="110" as="geometry" />
        </mxCell>
        
        <!-- System: Update Schedule Display -->
        <mxCell id="system-update-schedule" value="Update UI:&#xa;- Buá»•i gá»‘c: Excused&#xa;- ThÃªm buá»•i há»c bÃ¹&#xa;  vá»›i badge ðŸ”„&#xa;- Show branch name&#xa;- Show modality badge" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="swimlane-system" vertex="1">
          <mxGeometry x="30" y="2660" width="150" height="110" as="geometry" />
        </mxCell>
        
        <!-- System: Teacher Attendance Screen -->
        <mxCell id="system-teacher-attendance" value="Teacher Ä‘iá»ƒm danh:&#xa;- Show student&#xa;  vá»›i badge ðŸ”„ Há»c bÃ¹&#xa;- Show origin class/branch&#xa;- Mark &#39;present&#39;&#xa;- UPDATE student_session" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;align=left;" parent="swimlane-system" vertex="1">
          <mxGeometry x="165" y="2650" width="150" height="120" as="geometry" />
        </mxCell>
        
        <!-- System: Transaction Reject (Alternative) -->
        <mxCell id="system-transaction-reject" value="UPDATE student_request:&#xa;- status=&#39;rejected&#39; â­&#xa;- rejection_reason&#xa;- decided_by&#xa;- decided_at=NOW()&#xa;&#xa;(KHÃ”NG táº¡o&#xa;student_session má»›i)&#xa;(KHÃ”NG update capacity)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;align=left;fontStyle=1;" parent="swimlane-system" vertex="1">
          <mxGeometry x="300" y="2240" width="180" height="160" as="geometry" />
        </mxCell>
        
        <!-- System: Send Email Rejected -->
        <mxCell id="system-send-email-rejected" value="ðŸ“§ Gá»­i email&#xa;tá»›i Student:&#xa;&quot;YÃªu cáº§u bá»‹ tá»« chá»‘i&quot;&#xa;LÃ½ do: [...]&#xa;&#xa;Gá»£i Ã½ buá»•i khÃ¡c?" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="swimlane-system" vertex="1">
          <mxGeometry x="165" y="2420" width="120" height="120" as="geometry" />
        </mxCell>
        
        <!-- Swimlane: Academic Staff -->
        <mxCell id="swimlane-academic" value="Academic Staff (GiÃ¡o Vá»¥)" style="swimlane;startSize=40;horizontal=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="840" y="40" width="320" height="2800" as="geometry" />
        </mxCell>
        
        <!-- Academic: Receive Email -->
        <mxCell id="academic-receive-email" value="ðŸ“§ Nháº­n email&#xa;thÃ´ng bÃ¡o&#xa;yÃªu cáº§u há»c bÃ¹ má»›i&#xa;(táº¡i branch cá»§a mÃ¬nh)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="swimlane-academic" vertex="1">
          <mxGeometry x="85" y="1900" width="150" height="90" as="geometry" />
        </mxCell>
        
        <!-- Academic: Login and View -->
        <mxCell id="academic-login" value="Login há»‡ thá»‘ng&#xa;vÃ o menu&#xa;&quot;Pending Requests&quot;&#xa;Filter: Makeup" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="swimlane-academic" vertex="1">
          <mxGeometry x="85" y="2020" width="150" height="90" as="geometry" />
        </mxCell>
        
        <!-- Academic: Click Request -->
        <mxCell id="academic-click-request" value="Click vÃ o request&#xa;Ä‘á»ƒ xem chi tiáº¿t" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="swimlane-academic" vertex="1">
          <mxGeometry x="85" y="2150" width="150" height="60" as="geometry" />
        </mxCell>
        
        <!-- Academic: Review -->
        <mxCell id="academic-review" value="Review thÃ´ng tin:&#xa;- Target session&#xa;- Makeup session&#xa;- Branch matching âš ï¸&#xa;- Modality&#xa;- Capacity OK?&#xa;- Same content?&#xa;- Absence stats&#xa;- Policy check" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;align=left;" parent="swimlane-academic" vertex="1">
          <mxGeometry x="85" y="2240" width="150" height="160" as="geometry" />
        </mxCell>
        
        <!-- Academic: Decision -->
        <mxCell id="academic-decision" value="Quyáº¿t Ä‘á»‹nh?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontStyle=1;" parent="swimlane-academic" vertex="1">
          <mxGeometry x="95" y="2440" width="130" height="80" as="geometry" />
        </mxCell>
        
        <!-- Academic: Click Approve -->
        <mxCell id="academic-approve" value="Click&#xa;&quot;Approve&quot;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;" parent="swimlane-academic" vertex="1">
          <mxGeometry x="20" y="2430" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Academic: Click Reject -->
        <mxCell id="academic-reject" value="Click &quot;Reject&quot;&#xa;+ Nháº­p lÃ½ do tá»« chá»‘i&#xa;+ Suggest buá»•i khÃ¡c?" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1;" parent="swimlane-academic" vertex="1">
          <mxGeometry x="180" y="2220" width="120" height="80" as="geometry" />
        </mxCell>
        
        <!-- Academic: View Success -->
        <mxCell id="academic-view-success" value="Xem thÃ´ng bÃ¡o&#xa;xá»­ lÃ½ thÃ nh cÃ´ng&#xa;Email Ä‘Ã£ gá»­i" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="swimlane-academic" vertex="1">
          <mxGeometry x="85" y="2560" width="150" height="80" as="geometry" />
        </mxCell>
        
        <!-- ==================== ARROWS ==================== -->
        
        <!-- Student Flow - Initial -->
        <mxCell id="arrow1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="student-start" target="student-nav-requests" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="student-nav-requests" target="system-load-requests" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;exitX=0;exitY=0.5;" parent="1" source="system-load-requests" target="student-click-create" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="student-click-create" target="system-show-form-modal" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;exitX=0;exitY=0.5;" parent="1" source="system-show-form-modal" target="student-select-type" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="student-select-type" target="system-show-cases" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;exitX=0;exitY=0.5;" parent="1" source="system-show-cases" target="student-choose-case" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Case 1: Missed Sessions -->
        <mxCell id="arrow8" value="Case 1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontStyle=1;fillColor=#fff2cc;strokeColor=#d6b656;exitX=0;exitY=1;" parent="1" source="student-choose-case" target="student-case1-select" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="student-case1-select" target="system-case1-load" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Case 2: Future Sessions -->
        <mxCell id="arrow10" value="Case 2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontStyle=1;fillColor=#fff2cc;strokeColor=#d6b656;exitX=1;exitY=1;" parent="1" source="student-choose-case" target="student-case2-select" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="student-case2-select" target="system-case2-load" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Converge to Find Makeup -->
        <mxCell id="arrow12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" parent="1" source="system-case1-load" target="system-find-makeup" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow13" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;exitX=0.5;exitY=1;entryX=0.5;entryY=0;" parent="1" source="system-case2-load" target="system-find-makeup" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="450" y="920" />
              <mxPoint x="130" y="920" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <!-- Show Available List -->
        <mxCell id="arrow14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;exitX=1;exitY=0.5;entryX=0;entryY=0.5;" parent="1" source="system-find-makeup" target="system-show-available" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;exitX=0;exitY=0.5;entryX=1;entryY=0.5;" parent="1" source="system-show-available" target="student-view-available" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="student-view-available" target="student-filter" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow17" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="student-filter" target="student-select-makeup" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow18" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;exitX=1;exitY=0.5;" parent="1" source="student-select-makeup" target="system-show-form" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow19" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;exitX=0;exitY=0.5;" parent="1" source="system-show-form" target="student-fill-form" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow20" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="student-fill-form" target="student-click-submit" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow21" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="student-click-submit" target="system-frontend-validate" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow22" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;entryX=0.5;entryY=0;" parent="1" source="system-frontend-validate" target="system-backend-validate" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow23" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;exitX=1;exitY=0.5;entryX=0;entryY=0.5;" parent="1" source="system-backend-validate" target="system-insert-request" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow24" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;exitX=0;exitY=0.5;entryX=1;entryY=0.5;" parent="1" source="system-insert-request" target="system-show-success" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow25" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;exitX=0;exitY=0.5;" parent="1" source="system-show-success" target="student-view-success" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow26" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="student-view-success" target="student-view-badge" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Email to Staff (Async) -->
        <mxCell id="arrow27" value="async" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;dashed=1;exitX=1;exitY=0.5;" parent="1" source="system-insert-request" target="system-send-email-staff" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow28" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;dashed=1;" parent="1" source="system-send-email-staff" target="academic-receive-email" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Academic Staff Flow -->
        <mxCell id="arrow29" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="academic-receive-email" target="academic-login" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow30" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="academic-login" target="system-load-staff-requests" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow31" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;exitX=0;exitY=0.5;" parent="1" source="system-load-staff-requests" target="academic-click-request" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow32" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="academic-click-request" target="system-show-detail" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow33" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;exitX=1;exitY=0.5;" parent="1" source="system-show-detail" target="academic-review" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow34" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="academic-review" target="academic-decision" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Approve Path -->
        <mxCell id="arrow35" value="Approve" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontStyle=1;fillColor=#d5e8d4;strokeColor=#82b366;exitX=0;exitY=0.5;entryX=0.5;entryY=1;" parent="1" source="academic-decision" target="academic-approve" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow36" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="academic-approve" target="system-transaction-approve" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow37" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;exitX=1;exitY=0.5;entryX=0;entryY=0.5;" parent="1" source="system-transaction-approve" target="system-send-email-approved" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow38" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;dashed=1;exitX=0;exitY=0.5;" parent="1" source="system-send-email-approved" target="student-receive-approved" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow39" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="student-receive-approved" target="student-view-schedule" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow40" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;exitX=0.5;exitY=1;" parent="1" source="system-send-email-approved" target="system-send-email-teacher" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow41" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;exitX=0;exitY=0.5;" parent="1" source="system-send-email-teacher" target="system-update-schedule" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow42" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;exitX=0;exitY=0.5;" parent="1" source="system-update-schedule" target="student-view-schedule" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow43" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="student-view-schedule" target="student-attend-makeup" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow44" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;exitX=1;exitY=0.5;" parent="1" source="student-attend-makeup" target="system-teacher-attendance" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Reject Path -->
        <mxCell id="arrow45" value="Reject" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fontStyle=1;fillColor=#f8cecc;strokeColor=#b85450;exitX=1;exitY=0.5;entryX=0.5;entryY=0;" parent="1" source="academic-decision" target="academic-reject" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow46" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;exitX=0.5;exitY=1;" parent="1" source="academic-reject" target="system-transaction-reject" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow47" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;exitX=0;exitY=0.5;" parent="1" source="system-transaction-reject" target="system-send-email-rejected" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow48" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;dashed=1;exitX=0;exitY=0.5;" parent="1" source="system-send-email-rejected" target="student-receive-rejected" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Success Feedback -->
        <mxCell id="arrow49" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;exitX=0.5;exitY=0;entryX=0.5;entryY=1;" parent="1" source="system-transaction-approve" target="academic-view-success" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow50" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;exitX=0;exitY=0;entryX=0.5;entryY=1;" parent="1" source="system-transaction-reject" target="academic-view-success" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- ==================== LEGEND ==================== -->
        
        <mxCell id="legend-box" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="1200" y="80" width="260" height="520" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-title" value="LEGEND / CHÃš THÃCH" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1;fontSize=16;" parent="1" vertex="1">
          <mxGeometry x="1200" y="90" width="260" height="30" as="geometry" />
        </mxCell>
        
        <!-- Legend Item 1 -->
        <mxCell id="legend-1" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="1220" y="135" width="40" height="25" as="geometry" />
        </mxCell>
        <mxCell id="legend-1-text" value="Start/End/Success" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1270" y="132" width="170" height="30" as="geometry" />
        </mxCell>
        
        <!-- Legend Item 2 -->
        <mxCell id="legend-2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1220" y="170" width="40" height="25" as="geometry" />
        </mxCell>
        <mxCell id="legend-2-text" value="User Action" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1270" y="167" width="170" height="30" as="geometry" />
        </mxCell>
        
        <!-- Legend Item 3 -->
        <mxCell id="legend-3" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="1220" y="205" width="40" height="25" as="geometry" />
        </mxCell>
        <mxCell id="legend-3-text" value="System Process" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1270" y="202" width="170" height="30" as="geometry" />
        </mxCell>
        
        <!-- Legend Item 4 -->
        <mxCell id="legend-4" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1220" y="240" width="40" height="25" as="geometry" />
        </mxCell>
        <mxCell id="legend-4-text" value="DB Operation (CRUD)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1270" y="237" width="170" height="30" as="geometry" />
        </mxCell>
        
        <!-- Legend Item 5 -->
        <mxCell id="legend-5" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1220" y="275" width="40" height="25" as="geometry" />
        </mxCell>
        <mxCell id="legend-5-text" value="Validation Logic" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1270" y="272" width="170" height="30" as="geometry" />
        </mxCell>
        
        <!-- Legend Item 6 -->
        <mxCell id="legend-6" value="" style="rhombus;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="1220" y="310" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="legend-6-text" value="Decision Point" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1270" y="310" width="170" height="30" as="geometry" />
        </mxCell>
        
        <!-- Legend Item 7 -->
        <mxCell id="legend-7" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="1220" y="350" width="40" height="25" as="geometry" />
        </mxCell>
        <mxCell id="legend-7-text" value="Rejection/Error" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1270" y="347" width="170" height="30" as="geometry" />
        </mxCell>
        
        <!-- Legend Item 8 -->
        <mxCell id="legend-8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;endArrow=classic;endFill=1;" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1220" y="395" as="sourcePoint" />
            <mxPoint x="1260" y="395" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="legend-8-text" value="Synchronous Flow" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1270" y="380" width="170" height="30" as="geometry" />
        </mxCell>
        
        <!-- Legend Item 9 -->
        <mxCell id="legend-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;dashed=1;endArrow=classic;endFill=1;" parent="1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1220" y="430" as="sourcePoint" />
            <mxPoint x="1260" y="430" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="legend-9-text" value="Async (Email)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1270" y="415" width="170" height="30" as="geometry" />
        </mxCell>
        
        <!-- Legend Item 10 -->
        <mxCell id="legend-10-icon" value="â­" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;" parent="1" vertex="1">
          <mxGeometry x="1220" y="455" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="legend-10-text" value="Critical Status Update" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1270" y="455" width="170" height="30" as="geometry" />
        </mxCell>
        
        <!-- Legend Item 11 -->
        <mxCell id="legend-11-icon" value="ðŸ”„" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;" parent="1" vertex="1">
          <mxGeometry x="1220" y="495" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="legend-11-text" value="Makeup Session Badge" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1270" y="495" width="170" height="30" as="geometry" />
        </mxCell>
        
        <!-- Legend Item 12 -->
        <mxCell id="legend-12" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="1220" y="535" width="40" height="25" as="geometry" />
        </mxCell>
        <mxCell id="legend-12-text" value="Complex Query" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1270" y="532" width="170" height="30" as="geometry" />
        </mxCell>
        
        <!-- Note Box -->
        <mxCell id="note-box" value="ðŸ“ NOTES:&#xa;&#xa;1. Entry: &quot;My Requests&quot; tab&#xa;   (giá»‘ng Absence flow)&#xa;&#xa;2. CÃ³ 2 trÆ°á»ng há»£p:&#xa;   Case 1: Buá»•i Ä‘Ã£ nghá»‰&#xa;     (trong X tuáº§n)&#xa;   Case 2: Buá»•i sáº¯p tá»›i&#xa;     (pre-register)&#xa;&#xa;3. System tÃ¬m buá»•i há»c bÃ¹:&#xa;   - CÃ¹ng course_session_id â­&#xa;   - Cross-branch search ðŸŒ&#xa;   - All modalities:&#xa;     ðŸ¢ Offline&#xa;     ðŸ’» Online&#xa;     ðŸ”„ Hybrid&#xa;   - CÃ²n chá»— trá»‘ng&#xa;   - ChÆ°a diá»…n ra&#xa;&#xa;4. Student filter Ä‘Æ°á»£c:&#xa;   - Branch selection&#xa;   - Modality preference&#xa;   - Date/time range&#xa;&#xa;5. Khi approve:&#xa;   - Target â†’ excused&#xa;   - CREATE student_session&#xa;     vá»›i is_makeup = TRUE&#xa;   - Link via original_session_id&#xa;   - UPDATE capacity&#xa;&#xa;6. Teacher nháº­n email vá»&#xa;   student há»c bÃ¹ tá»« class/&#xa;   branch khÃ¡c&#xa;&#xa;7. Badge ðŸ”„ hiá»ƒn thá»‹ trong&#xa;   danh sÃ¡ch Ä‘iá»ƒm danh vá»›i&#xa;   thÃ´ng tin origin class&#xa;&#xa;8. Academic Staff review:&#xa;   - Branch matching âš ï¸&#xa;   - Policy compliance&#xa;   - Capacity availability" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffffcc;strokeColor=#d6b656;align=left;verticalAlign=top;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="1200" y="630" width="260" height="490" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
